
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<?xml-stylesheet href="./static/themes/default/theme.css" type="text/css"?>

<!DOCTYPE window [ $dtd ]>

<window
    id="main-window"
    title="Deejayd webui"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<script src="./static/js/common.js"/>
<script src="./static/js/xul/commonTree.js"/>
<script src="./static/js/xul/commonList.js"/>
<script src="./static/js/xul/fileList.js"/>
<script src="./static/js/xul/player.js"/>
<script src="./static/js/xul/playlist.js"/>
<script src="./static/js/xul/webradio.js"/>
<script src="./static/js/xul/queue.js"/>
<script src="./static/js/xul/video.js"/>
<script src="./static/js/xul/dvd.js"/>
<script src="./static/js/ajax.js"/>
<script src="./static/js/main.js"/>

<keyset>
    <key id="playpause-key" key="x"
    	oncommand="ajaxdj_ref.send_command('playtoggle','',true);"/>
    <key id="stop-key" key="v"
    	oncommand="ajaxdj_ref.send_command('stop','',true);"/>
    <key id="previous-key" key="w"
    	oncommand="ajaxdj_ref.send_command('previous','',true);"/>
    <key id="next-key" key="b"
    	oncommand="ajaxdj_ref.send_command('next','',true);"/>
    <key id="suboffset_up-key" key="c"
    	oncommand="ajaxdj_ref.send_command('setPlayerOption',
         {option_name:'sub_offset',option_value:'100',set_type:'up'},true);"/>
    <key id="suboffset_down-key" key="z"
    	oncommand="ajaxdj_ref.send_command('setPlayerOption',
         {option_name:'sub_offset',option_value:'100',set_type:'down'},true);"/>
    <key id="avoffset_up-key" key="p"
    	oncommand="ajaxdj_ref.send_command('setPlayerOption',
         {option_name:'av_offset',option_value:'100',set_type:'up'},true);"/>
    <key id="avoffset_down-key" key="o"
    	oncommand="ajaxdj_ref.send_command('setPlayerOption',
         {option_name:'av_offset',option_value:'100',set_type:'down'},true);"/>
    <key id="zoom_up-key" key="l"
    	oncommand="ajaxdj_ref.send_command('setPlayerOption',
         {option_name:'zoom',option_value:'5',set_type:'up'},true);"/>
    <key id="zoom_down-key" key="m"
    	oncommand="ajaxdj_ref.send_command('setPlayerOption',
         {option_name:'zoom',option_value:'5',set_type:'down'},true);"/>
</keyset>

<popupset>
    <menupopup id="queue-menu" onpopupshowing="javascript:;">
        <menuitem
            class="menuitem-iconic play-action"
            label="&play;"
            oncommand="queue_ref.play();"/>
        <menuitem
            class="menuitem-iconic remove-action"
            label="&remove;"
            oncommand="queue_ref.removeItems();"/>
        <menu
            label="&rating;">
            <menupopup id="queue-rating-menu">
                <menuitem
                    label=" 0 "
                    oncommand="queue_ref.setRating(0);"/>
                <menuitem
                    label="1 ♪"
                    oncommand="queue_ref.setRating(1);"/>
                <menuitem
                    label="2 ♪♪"
                    oncommand="queue_ref.setRating(2);"/>
                <menuitem
                    label="3 ♪♪♪"
                    oncommand="queue_ref.setRating(3);"/>
                <menuitem
                    label="4 ♪♪♪♪"
                    oncommand="queue_ref.setRating(4);"/>
            </menupopup>
        </menu>
    </menupopup>
</popupset>

<!-- HEADER -->
<hbox
    align="start"
    id="ajaxdj-header" >

    <groupbox id="command-panel">
        <toolbox align="center" >
            <toolbar
                id="command-toolbar">
                <toolbarbutton
                 oncommand="return ajaxdj_ref.send_command('previous','',true);"
                 class="previous-button"
                 id="previous-button"/>
                <toolbarbutton
                 oncommand=
                        "return ajaxdj_ref.send_command('playtoggle','',true);"
                 class="play-button"
                 id="playtoggle-button"/>
                <toolbarbutton
                 oncommand="return ajaxdj_ref.send_command('stop','',true);"
                 class="stop-button"
                 id="stop-button"/>
                <toolbarbutton
                 oncommand="return ajaxdj_ref.send_command('next','',true);"
                 class="next-button"
                 id="next-button"/>
            </toolbar>
            <toolbar
                align="center"
                id="volseek-toolbar">
                <image
                    id="volume-image"
                    src='static/themes/default/images/volume-zero.png'
                    height="25px"
                    width="25px"/>
                <scale
                    onchange="PlayerObserver.volumeUpdate(this); return true;"
                    min="0"
                    max="100"
                    increment="5"
                    id="player-volume"/>
            </toolbar>
        </toolbox>
    </groupbox>

    <vbox
        style="visibility: collapse"
        id="current-media">
        <vbox id="media-info" flex="1"/>
        <hbox
            id="seekbar"
            align="center">
            <button
                id="seekbar-button"
                label="0:00 -->"
                oncommand="toogleNodeVisibility('player-seekbar');"/>
            <scale
                style="visibility: collapse"
                onchange="PlayerObserver.seekUpdate(this); return true;"
                min="0"
                increment="5"
                id="player-seekbar"/>
        </hbox>
        <hbox id="playeroption-button" style="visibility: collapse">
            <button
                label="&advancedOption; ->"
                popup="options-panel"/>
            <spacer flex="1"/>
        </hbox>
    </vbox>

    <panel position="end_before" id="options-panel"><grid>
        <columns>
            <column flex="2"/>
            <column flex="1"/>
            <column flex="1"/>
        </columns>

        <rows>
            <row align="center"
                style="visibility: collapse"
                id="audio-row">
                <label value="&audio_channel;"/>
                <menulist
                    oncommand="player_ref.set_alang(event.target.value);">
                    <menupopup id="audio-menu"/>
                </menulist>
            </row>
            <row align="center"
                style="visibility: collapse"
                id="subtitle-row">
                <label value="&subtitle_channel;"/>
                <menulist
                    oncommand="player_ref.set_slang(event.target.value);">
                    <menupopup id="subtitle-menu"/>
                </menulist>
            </row>
            <row align="center"
                style="visibility: collapse"
                id="av_offset-row">
                <label value="&av_offset;"/>
                <textbox
                    increment="100"
                    min="-10000"
                    onchange="player_ref.set_avoffset();"
                    type="number"
                    id="av_offset-value"/>
                <label value="ms"/>
            </row>
            <row align="center"
                style="visibility: collapse"
                id="sub_offset-row">
                <label value="&sub_offset;"/>
                <textbox
                    increment="100"
                    min="-10000"
                    onchange="player_ref.set_suboffset();"
                    type="number"
                    id="sub_offset-value"/>
                <label value="ms"/>
            </row>
            <row align="center"
                style="visibility: collapse"
                id="zoom-row">
                <label value="&zoom;"/>
                <textbox
                    increment="5"
                    min="-85"
                    max="400"
                    onchange="player_ref.set_zoom();"
                    type="number"
                    id="zoom-value"/>
                <label value="%"/>
            </row>
        </rows>
    </grid></panel>

    <spacer flex="1"/>

    <hbox id="right-header" pack="center" align="center">
        <description value="&mode; "/>
        <menulist
            id="mode-menu"
            oncommand="ajaxdj_ref.updateMode();"
            label="">
            <menupopup>
                <menuitem
                    class="menuitem-iconic audio-item"
                    hidden="true"
                    id="playlist-source"
                    value="playlist" label="&playlist;"/>
                <menuitem
                    class="menuitem-iconic webradio-item"
                    hidden="true"
                    id="webradio-source"
                    value="webradio" label="&webradio;"/>
                <menuitem
                    class="menuitem-iconic video-item"
                    hidden="true"
                    id="video-source"
                    value="video" label="&video;"/>
                <menuitem
                    class="menuitem-iconic dvd-item"
                    hidden="true"
                    id="dvd-source"
                    value="dvd" label="&dvd;"/>
            </menupopup>
        </menulist>
    </hbox>
</hbox>
<!-- END HEADER -->

<!-- MAIN -->
<vbox flex="1">
<deck
    flex="8"
    persist="height"
    id="main-and-debug"
    selectedIndex="0">
    <deck
        selectedIndex="0"
        id="main">
            $playlist_box
            $webradio_box
            $video_box
            $dvd_box
    </deck>
    <textbox
        id="debug"
        multiline="true"/>
</deck>

<!-- Insert Queue -->
<hbox id="queue-panel">
    <toolbar>
        <toolbarbutton
            id="queue-button"
            class="collapsed"
            oncommand="queue_ref.toogleQueue();"
            label="&queue;"/>
        <toolbarbutton
            id="queue-status-button"
            class="stop-button"
            oncommand="queue_ref.toogleQueue();"
            />
    </toolbar>
    <hbox align="center">
        <description id="queue-description" value=""/>
        <hbox id="queue-actions" style="visibility: hidden;">
            <button
                id="queue-clear"
                class="clear-button"
                oncommand="ajaxdj_ref.send_command('queueClear',{},true);"
                label="&clear;"/>
            <command
                oncommand="return queue_ref.toggle_random();"
                id="qplayorder-command"/>
            <checkbox
                label="&random;"
                id="queue-playorder"
                command="qplayorder-command"
                checked="false"/>
        </hbox>
    </hbox>
    <spacer flex="1"/>
    <hbox>
        <image
            align="end"
            id="msg-loading"
            style="display: none;"
            src="./static/themes/default/images/loading.gif"/>
        <button
            id = "debug-button"
            style = "display: none;"
            oncommand="ajaxdj_ref.toggleDebugZone();"
            label="&showDebug;"/>
    </hbox>
</hbox>
<splitter
    style="visibility: collapse;"
    id="queue-splitter"
    persist="position"
    collapse="after"
    state="collapsed"/>
<vbox
    flex="10"
    persist="height"
    id="queue-box">
    <tree
        flex="2"
        id="queue-tree"
        enableColumnDrag="true"
        ref="http://queue/all-content"
        datasources="rdf:null"
        ondragover="queue_ref.dragOver(event);"
        ondragenter="queue_ref.dragEnter(event);"
        ondragexit="queue_ref.dragExit(event);"
        ondragdrop="queue_ref.drop(event);" >
        <treecols>
            <treecol persist="width ordinal hidden" id="qu-track"
                flex="1" label="#"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-title"
                flex="4" label="&title;"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-artist"
                flex="3" label="&artist;"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-album"
                flex="3" label="&album;"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-genre"
                hidden="true" flex="3" label="&genre;"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-time"
                flex="2" label="&time;"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-rating"
                flex="2" label="&rating;"/>
            <splitter class="tree-splitter"/>
            <treecol persist="width ordinal hidden" id="qu-bitrate"
                hidden="true" flex="2" label="&bitrate;"/>
        </treecols>

        <template>
        <rule>

            <treechildren
                ondraggesture = "queue_ref.dragStart(event);"
                oncontextmenu="queue_ref.showPopupMenu(event);"
                ondblclick = "queue_ref.play();"
                id="queue-items">
                <treeitem uri="rdf:*"
                          value="rdf:http://queue/rdf#media_id">
                    <treerow value="rdf:http://queue/rdf#media_id">
                        <treecell label="rdf:http://queue/rdf#tracknumber"/>
                        <treecell label="rdf:http://queue/rdf#title"/>
                        <treecell label="rdf:http://queue/rdf#artist"/>
                        <treecell label="rdf:http://queue/rdf#album"/>
                        <treecell label="rdf:http://queue/rdf#genre"/>
                        <treecell label="rdf:http://queue/rdf#length"/>
                        <treecell label="rdf:http://queue/rdf#rating"/>
                        <treecell label="rdf:http://queue/rdf#bitrate"/>
                    </treerow>
                </treeitem>
            </treechildren>

        </rule>
        </template>
    </tree>
</vbox>
<!-- END Queue -->

</vbox>
<!-- END MAIN -->
<vbox>
    <notificationbox dir="reverse" flex="1" id="notification-box"/>
</vbox>

</window>
