<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.0.0//EN" "http://google-web-toolkit.googlecode.com/svn/tags/2.0.0/distro-source/core/src/gwt-module.dtd">
<module rename-to='mobile_webui'>
  <inherits name="com.google.gwt.user.User" />
  <inherits name='org.mroy31.deejayd.common.DeejaydCommon'/>
  <inherits name="com.google.gwt.resources.Resources" />
  <inherits name="com.google.gwt.i18n.I18N"/>

  <!-- French language, independent of country -->
  <extend-property name="locale" values="fr"/>
  <!-- English language, independent of country -->
  <extend-property name="locale" values="en"/>

  <!-- Default locale -->
  <set-property-fallback name="locale" value="en"/>

  <!-- Only support gecko and webkit -->
  <set-property name="user.agent" value="safari,gecko1_8"/>

  <define-property name="mobile.user.agent" values="mobilesafari, none"/>
  <property-provider name="mobile.user.agent"><![CDATA[
    var ua = navigator.userAgent.toLowerCase();
    if (ua.indexOf("webkit") != -1 && ua.indexOf("mobile") != -1) {
      return "mobilesafari";
    }
      return "none";
  ]]></property-provider>
  <set-property name="mobile.user.agent" value="none" >
    <none>
      <when-property-is name="user.agent" value="safari" />
    </none>
  </set-property>

  <replace-with class="com.google.gwt.user.client.impl.DOMImplExtendWebkit">
    <when-type-is class="com.google.gwt.user.client.impl.DOMImpl"/>
    <all>
      <when-property-is name="user.agent" value="safari"/>
      <when-property-is name="mobile.user.agent" value="none"/>
    </all>
  </replace-with>
  <replace-with class="com.google.gwt.user.client.impl.DOMImplMobileWebkit">
    <when-type-is class="com.google.gwt.user.client.impl.DOMImpl"/>
    <all>
      <when-property-is name="user.agent" value="safari"/>
      <when-property-is name="mobile.user.agent" value="mobilesafari"/>
    </all>
  </replace-with>

  <replace-with class="org.mroy31.deejayd.mobile.widgets.impl.VolumeSliderMobileImpl">
    <when-type-is class="org.mroy31.deejayd.mobile.widgets.impl.VolumeSliderImpl"/>
    <all>
      <when-property-is name="user.agent" value="safari"/>
      <when-property-is name="mobile.user.agent" value="mobilesafari"/>
    </all>
  </replace-with>

  <!-- disable animation for mobile for now -->
  <replace-with class="org.mroy31.deejayd.mobile.widgets.impl.WallToWallPanelWebkitImpl">
    <when-type-is class="org.mroy31.deejayd.mobile.widgets.impl.WallToWallPanelImpl"/>
    <all>
      <when-property-is name="user.agent" value="safari"/>
      <when-property-is name="mobile.user.agent" value="none"/>
    </all>
  </replace-with>


  <!-- Specify the app entry point class.                         -->
  <entry-point class='org.mroy31.deejayd.mobile.client.Mobile_Webui'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='events'/>
  <source path='resources'/>
  <source path='sources'/>
  <source path='i18n'/>
  <source path='widgets'/><source path="library"></source>
</module>